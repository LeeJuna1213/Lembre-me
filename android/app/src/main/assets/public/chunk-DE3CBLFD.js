import{c as ce,d as le,g as de}from"./chunk-CW5OG2HR.js";import"./chunk-VTKDWUYY.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OJE7KO2I.js";import"./chunk-OLP7TZLS.js";import"./chunk-MNWVQ2GV.js";import"./chunk-NNIJTWKE.js";import"./chunk-VJBCUAKI.js";import"./chunk-UZJHEFYY.js";import"./chunk-7FY2OE2O.js";import"./chunk-TB63JOC5.js";import"./chunk-ZP4JA4YW.js";import"./chunk-LOS5H76W.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-KPJOILWU.js";import"./chunk-CKP3SGE2.js";import"./chunk-ET6LRVPN.js";import{B as M,C as w,D as y,E as ne,K as re,L as S,M as V,T as E,U as W,ba as ae,da as ie,fa as oe,ha as se,i as Z,j as N,p as ee,q as k,s as H,u as te,y as B}from"./chunk-2BCWUGCT.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as q,e as s}from"./chunk-JHI3MBHO.js";var T=(function(i){return i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE",i})(T||{}),v=class extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}},be=i=>{var e,t;return i?.androidBridge?"android":!((t=(e=i?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},we=i=>{let e=i.CapacitorCustomPlatform||null,t=i.Capacitor||{},r=t.Plugins=t.Plugins||{},n=()=>e!==null?e.name:be(i),a=()=>n()!=="web",o=d=>{let u=f.get(d);return!!(u?.platforms.has(n())||c(d))},c=d=>{var u;return(u=t.PluginHeaders)===null||u===void 0?void 0:u.find(R=>R.name===d)},l=d=>i.console.error(d),f=new Map,L=(d,u={})=>{let R=f.get(d);if(R)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),R.proxy;let _=n(),O=c(d),b,me=()=>s(null,null,function*(){return!b&&_ in u?b=typeof u[_]=="function"?b=yield u[_]():b=u[_]:e!==null&&!b&&"web"in u&&(b=typeof u.web=="function"?b=yield u.web():b=u.web),b}),ge=(p,m)=>{var h,P;if(O){let x=O?.methods.find(g=>m===g.name);if(x)return x.rtype==="promise"?g=>t.nativePromise(d,m.toString(),g):(g,F)=>t.nativeCallback(d,m.toString(),g,F);if(p)return(h=p[m])===null||h===void 0?void 0:h.bind(p)}else{if(p)return(P=p[m])===null||P===void 0?void 0:P.bind(p);throw new v(`"${d}" plugin is not implemented on ${_}`,T.Unimplemented)}},D=p=>{let m,h=(...P)=>{let x=me().then(g=>{let F=ge(g,p);if(F){let j=F(...P);return m=j?.remove,j}else throw new v(`"${d}.${p}()" is not implemented on ${_}`,T.Unimplemented)});return p==="addListener"&&(x.remove=()=>s(null,null,function*(){return m()})),x};return h.toString=()=>`${p.toString()}() { [capacitor code] }`,Object.defineProperty(h,"name",{value:p,writable:!1,configurable:!1}),h},X=D("addListener"),Y=D("removeListener"),he=(p,m)=>{let h=X({eventName:p},m),P=()=>s(null,null,function*(){let g=yield h;Y({eventName:p,callbackId:g},m)}),x=new Promise(g=>h.then(()=>g({remove:P})));return x.remove=()=>s(null,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield P()}),x},z=new Proxy({},{get(p,m){switch(m){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return O?he:X;case"removeListener":return Y;default:return D(m)}}});return r[d]=z,f.set(d,{name:d,proxy:z,platforms:new Set([...Object.keys(u),...O?[_]:[]])}),z};return t.convertFileSrc||(t.convertFileSrc=d=>d),t.getPlatform=n,t.handleError=l,t.isNativePlatform=a,t.isPluginAvailable=o,t.registerPlugin=L,t.Exception=v,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},ye=i=>i.Capacitor=we(i),J=ye(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),$=J.registerPlugin,U=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);let a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);let o=()=>s(this,null,function*(){return this.removeListener(e,t)});return Promise.resolve({remove:o})}removeAllListeners(){return s(this,null,function*(){this.listeners={};for(let e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,t,r){let n=this.listeners[e];if(!n){if(r){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}n.forEach(a=>a(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new J.Exception(e,T.Unimplemented)}unavailable(e="not available"){return new J.Exception(e,T.Unavailable)}removeListener(e,t){return s(this,null,function*(){let r=this.listeners[e];if(!r)return;let n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}};var ue=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),fe=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),K=class extends U{getCookies(){return s(this,null,function*(){let e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[n,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=fe(n).trim(),a=fe(a).trim(),t[n]=a}),t})}setCookie(e){return s(this,null,function*(){try{let t=ue(e.key),r=ue(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${n}; path=${a}; ${o};`}catch(t){return Promise.reject(t)}})}deleteCookie(e){return s(this,null,function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})}clearCookies(){return s(this,null,function*(){try{let e=document.cookie.split(";")||[];for(let t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})}clearAllCookies(){return s(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}},Le=$("CapacitorCookies",{web:()=>new K}),ve=i=>s(null,null,function*(){return new Promise((e,t)=>{let r=new FileReader;r.onload=()=>{let n=r.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},r.onerror=n=>t(n),r.readAsDataURL(i)})}),Pe=(i={})=>{let e=Object.keys(i);return Object.keys(i).map(n=>n.toLocaleLowerCase()).reduce((n,a,o)=>(n[a]=i[e[o]],n),{})},xe=(i,e=!0)=>i?Object.entries(i).reduce((r,n)=>{let[a,o]=n,c,l;return Array.isArray(o)?(l="",o.forEach(f=>{c=e?encodeURIComponent(f):f,l+=`${a}=${c}&`}),l.slice(0,-1)):(c=e?encodeURIComponent(o):o,l=`${a}=${c}`),`${r}&${l}`},"").substr(1):null,Ce=(i,e={})=>{let t=Object.assign({method:i.method||"GET",headers:i.headers},e),n=Pe(i.headers)["content-type"]||"";if(typeof i.data=="string")t.body=i.data;else if(n.includes("application/x-www-form-urlencoded")){let a=new URLSearchParams;for(let[o,c]of Object.entries(i.data||{}))a.set(o,c);t.body=a.toString()}else if(n.includes("multipart/form-data")||i.data instanceof FormData){let a=new FormData;if(i.data instanceof FormData)i.data.forEach((c,l)=>{a.append(l,c)});else for(let c of Object.keys(i.data))a.append(c,i.data[c]);t.body=a;let o=new Headers(t.headers);o.delete("content-type"),t.headers=o}else(n.includes("application/json")||typeof i.data=="object")&&(t.body=JSON.stringify(i.data));return t},G=class extends U{request(e){return s(this,null,function*(){let t=Ce(e,e.webFetchExtra),r=xe(e.params,e.shouldEncodeUrlParams),n=r?`${e.url}?${r}`:e.url,a=yield fetch(n,t),o=a.headers.get("content-type")||"",{responseType:c="text"}=a.ok?e:{};o.includes("application/json")&&(c="json");let l,f;switch(c){case"arraybuffer":case"blob":f=yield a.blob(),l=yield ve(f);break;case"json":l=yield a.json();break;case"document":case"text":default:l=yield a.text()}let L={};return a.headers.forEach((d,u)=>{L[u]=d}),{data:l,headers:L,status:a.status,url:a.url}})}get(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}},Oe=$("CapacitorHttp",{web:()=>new G});var C=(function(i){return i.Prompt="PROMPT",i.Camera="CAMERA",i.Photos="PHOTOS",i})(C||{}),A=(function(i){return i.Rear="REAR",i.Front="FRONT",i})(A||{}),Q=(function(i){return i.Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",i})(Q||{});var I=class extends U{getPhoto(e){return s(this,null,function*(){return new Promise((t,r)=>s(this,null,function*(){if(e.webUseInput||e.source===C.Photos)this.fileInputExperience(e,t,r);else if(e.source===C.Prompt){let n=document.querySelector("pwa-action-sheet");n||(n=document.createElement("pwa-action-sheet"),document.body.appendChild(n)),n.header=e.promptLabelHeader||"Photo",n.cancelable=!1,n.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],n.addEventListener("onSelection",a=>s(this,null,function*(){a.detail===0?this.fileInputExperience(e,t,r):this.cameraExperience(e,t,r)}))}else this.cameraExperience(e,t,r)}))})}pickImages(e){return s(this,null,function*(){return new Promise((t,r)=>s(this,null,function*(){this.multipleFileInputExperience(t,r)}))})}cameraExperience(e,t,r){return s(this,null,function*(){if(customElements.get("pwa-camera-modal")){let n=document.createElement("pwa-camera-modal");n.facingMode=e.direction===A.Front?"user":"environment",document.body.appendChild(n);try{yield n.componentOnReady(),n.addEventListener("onPhoto",a=>s(this,null,function*(){let o=a.detail;o===null?r(new v("User cancelled photos app")):o instanceof Error?r(o):t(yield this._getCameraPhoto(o,e)),n.dismiss(),document.body.removeChild(n)})),n.present()}catch{this.fileInputExperience(e,t,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,r)})}fileInputExperience(e,t,r){let n=document.querySelector("#_capacitor-camera-input"),a=()=>{var o;(o=n.parentNode)===null||o===void 0||o.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input",n.type="file",n.hidden=!0,document.body.appendChild(n),n.addEventListener("change",o=>{let c=n.files[0],l="jpeg";if(c.type==="image/png"?l="png":c.type==="image/gif"&&(l="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){let f=new FileReader;f.addEventListener("load",()=>{if(e.resultType==="dataUrl")t({dataUrl:f.result,format:l});else if(e.resultType==="base64"){let L=f.result.split(",")[1];t({base64String:L,format:l})}a()}),f.readAsDataURL(c)}else t({webPath:URL.createObjectURL(c),format:l}),a()}),n.addEventListener("cancel",o=>{r(new v("User cancelled photos app")),a()})),n.accept="image/*",n.capture=!0,e.source===C.Photos||e.source===C.Prompt?n.removeAttribute("capture"):e.direction===A.Front?n.capture="user":e.direction===A.Rear&&(n.capture="environment"),n.click()}multipleFileInputExperience(e,t){let r=document.querySelector("#_capacitor-camera-input-multiple"),n=()=>{var a;(a=r.parentNode)===null||a===void 0||a.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",a=>{let o=[];for(let c=0;c<r.files.length;c++){let l=r.files[c],f="jpeg";l.type==="image/png"?f="png":l.type==="image/gif"&&(f="gif"),o.push({webPath:URL.createObjectURL(l),format:f})}e({photos:o}),n()}),r.addEventListener("cancel",a=>{t(new v("User cancelled photos app")),n()})),r.accept="image/*",r.click()}_getCameraPhoto(e,t){return new Promise((r,n)=>{let a=new FileReader,o=e.type.split("/")[1];t.resultType==="uri"?r({webPath:URL.createObjectURL(e),format:o,saved:!1}):(a.readAsDataURL(e),a.onloadend=()=>{let c=a.result;t.resultType==="dataUrl"?r({dataUrl:c,format:o,saved:!1}):r({base64String:c.split(",")[1],format:o,saved:!1})},a.onerror=c=>{n(c)})})}checkPermissions(){return s(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return s(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return s(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return s(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},Ae=new I;var pe=$("Camera",{web:()=>new I});function _e(i,e){if(i&1&&(w(0,"div",10),ne(1,"img",11),y()),i&2){let t=V();k(),M("src",t.tarefa.foto,ee)}}function Ee(i,e){if(i&1){let t=re();w(0,"button",12),S("click",function(){Z(t);let n=V();return N(n.excluirTarefa())}),E(1,` \u{1F5D1}\uFE0F Excluir tarefa
`),y()}}var Ke=(()=>{let e=class e{constructor(r,n){this.route=r,this.router=n}ngOnInit(){let r=Number(this.route.snapshot.paramMap.get("id")),a=JSON.parse(localStorage.getItem("tarefas")||"[]").find(o=>o.id===r);if(!a){this.router.navigate(["/tarefas"]);return}this.tarefa=q({},a),this.tarefa.foto&&(this.tarefa.fotoReloads=(this.tarefa.fotoReloads??0)+1,this.tarefa.fotoReloads>2&&(delete this.tarefa.foto,delete this.tarefa.fotoReloads),this.salvarAtualizacao())}tirarFoto(){return s(this,null,function*(){let r=yield pe.getPhoto({quality:70,allowEditing:!1,resultType:Q.DataUrl,source:C.Camera});this.tarefa.foto=r.dataUrl,this.tarefa.fotoReloads=0,this.salvarAtualizacao()})}confirmarTarefa(){this.tarefa.feito=!0,this.tarefa.datetime=new Date().toLocaleString(),this.salvarAtualizacao(),this.router.navigate(["/tarefas"])}salvarAtualizacao(){let n=JSON.parse(localStorage.getItem("tarefas")||"[]").map(a=>a.id===this.tarefa.id?q({},this.tarefa):a);localStorage.setItem("tarefas",JSON.stringify(n))}excluirTarefa(){let n=JSON.parse(localStorage.getItem("tarefas")||"[]").filter(a=>a.id!==this.tarefa.id);localStorage.setItem("tarefas",JSON.stringify(n)),this.router.navigate(["/tarefas"])}voltarTarefas(){this.router.navigate(["/tarefas"])}};e.\u0275fac=function(n){return new(n||e)(H(oe),H(se))},e.\u0275cmp=te({type:e,selectors:[["app-fazer-tarefa"]],decls:15,vars:5,consts:[[3,"fullscreen"],[1,"fechar",3,"click"],[1,"tarefa-info"],[1,"emoji"],[1,"titulo"],[1,"card-foto"],["class","preview-container",4,"ngIf"],[1,"bnt-foto",3,"click"],[1,"bnt-concluir",3,"click"],["class","bnt-excluir",3,"click",4,"ngIf"],[1,"preview-container"],[1,"preview-foto",3,"src"],[1,"bnt-excluir",3,"click"]],template:function(n,a){n&1&&(w(0,"ion-content",0)(1,"button",1),S("click",function(){return a.voltarTarefas()}),E(2," \u21A9\uFE0F "),y(),w(3,"div",2)(4,"div",3),E(5),y(),w(6,"h2",4),E(7),y()(),w(8,"ion-card",5),B(9,_e,2,1,"div",6),w(10,"button",7),S("click",function(){return a.tirarFoto()}),E(11," \u{1F4F8} Tirar foto para comprovar "),y()(),w(12,"button",8),S("click",function(){return a.confirmarTarefa()}),E(13," \u2705 Concluir tarefa "),y(),B(14,Ee,2,0,"button",9),y()),n&2&&(M("fullscreen",!0),k(5),W(a.tarefa.emoji),k(2),W(a.tarefa.titulo),k(2),M("ngIf",a.tarefa.foto),k(5),M("ngIf",a.tarefa.id>3))},dependencies:[ie,ae,de,ce,le],styles:["ion-content[_ngcontent-%COMP%]   .fechar[_ngcontent-%COMP%]{position:absolute;background-color:transparent;font-size:35px;top:20px;left:12px}ion-content[_ngcontent-%COMP%]   .tarefa-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:-30px;padding:60px 0}ion-content[_ngcontent-%COMP%]   .emoji[_ngcontent-%COMP%]{font-size:70px}ion-content[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{font-size:2rem;text-shadow:0px 2px 4px rgba(0,0,0,.25)}ion-content[_ngcontent-%COMP%]   .card-foto[_ngcontent-%COMP%]{border-radius:16px;margin-top:-30px;background-color:var(--ion-color-primary)}ion-content[_ngcontent-%COMP%]   .bnt-foto[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .bnt-concluir[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .bnt-excluir[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:18px;gap:8px;border-radius:16px;border:none;color:#000;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}ion-content[_ngcontent-%COMP%]   .bnt-foto[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary);margin:20px auto;padding:20px 50px}ion-content[_ngcontent-%COMP%]   .bnt-concluir[_ngcontent-%COMP%]{background-color:var(--ion-color-success);margin:20px auto;padding:20px 120px}ion-content[_ngcontent-%COMP%]   .bnt-excluir[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);margin:20px auto;padding:20px 125px}ion-content[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}ion-content[_ngcontent-%COMP%]   .preview-foto[_ngcontent-%COMP%]{max-width:250px;width:100%;border-radius:5px;object-fit:cover}"]});let i=e;return i})();export{Ke as FazerTarefaPage};
